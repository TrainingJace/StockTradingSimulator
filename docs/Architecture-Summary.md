# ğŸ—ï¸ Stock Trading Simulator é¡¹ç›®æ¶æ„æ€»ç»“

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**Stock Trading Simulator** æ˜¯ä¸€ä¸ªåŸºäºå†å²æ•°æ®çš„è‚¡ç¥¨äº¤æ˜“æ¨¡æ‹Ÿå™¨ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œç”¨äºæ•™è‚²å’ŒåŸ¹è®­ç›®çš„ã€‚ç”¨æˆ·å¯ä»¥ä»å†å²ç‰¹å®šæ—¥æœŸå¼€å§‹ï¼ŒåŸºäºçœŸå®å†å²æ•°æ®å’Œæ–°é—»è¿›è¡Œè™šæ‹Ÿè‚¡ç¥¨äº¤æ˜“ï¼Œè¿½è¸ªæŠ•èµ„ç»„åˆè¡¨ç°ã€‚

---

## ğŸ¯ æŠ€æœ¯æ ˆ

### å‰ç«¯ (Frontend)
- **æ¡†æ¶**: React 19.1.0 + Vite 7.0.4
- **è·¯ç”±**: React Router DOM 7.7.1
- **çŠ¶æ€ç®¡ç†**: React Context (AuthContext)
- **å›¾è¡¨ç»„ä»¶**: Recharts 3.1.0
- **HTTPå®¢æˆ·ç«¯**: è‡ªå®šä¹‰ ApiClient (åŸºäº fetch)
- **æ„å»ºå·¥å…·**: Vite + ESLint

### åç«¯ (Backend)
- **è¿è¡Œæ—¶**: Node.js
- **æ¡†æ¶**: Express.js 4.21.2
- **æ•°æ®åº“**: MySQL (mysql2 3.14.2)
- **è®¤è¯**: JWT (jsonwebtoken 9.0.2)
- **å¯†ç åŠ å¯†**: bcrypt 6.0.0
- **å¤–éƒ¨API**: Finnhub + Alpha Vantage (è‚¡ç¥¨æ•°æ®)
- **å¼€å‘å·¥å…·**: Nodemon 3.0.1

### æ•°æ®åº“
- **ç±»å‹**: MySQL/MariaDB
- **ORM**: åŸç”Ÿ SQL æŸ¥è¯¢
- **è¿æ¥æ± **: mysql2 connection pool

---

## ğŸ›ï¸ ç³»ç»Ÿæ¶æ„

### 1. å‰ç«¯æ¶æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.jsx                 # æ ¹ç»„ä»¶ï¼Œè·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ main.jsx                # åº”ç”¨å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                    # API å±‚
â”‚   â”‚   â”œâ”€â”€ client.js           # HTTP å®¢æˆ·ç«¯å°è£…
â”‚   â”‚   â”œâ”€â”€ authApi.js          # è®¤è¯ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ stockApi.js         # è‚¡ç¥¨æ•°æ®API
â”‚   â”‚   â”œâ”€â”€ portfolioApi.js     # æŠ•èµ„ç»„åˆAPI
â”‚   â”‚   â”œâ”€â”€ tradingApi.js       # äº¤æ˜“ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ watchlistApi.js     # è§‚å¯Ÿåˆ—è¡¨API
â”‚   â”‚   â”œâ”€â”€ newsApi.js          # æ–°é—»API
â”‚   â”‚   â””â”€â”€ analyticsApi.js     # åˆ†æç»Ÿè®¡API
â”‚   â”‚
â”‚   â”œâ”€â”€ components/             # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Navigation.jsx      # å¯¼èˆªæ 
â”‚   â”‚   â”œâ”€â”€ BuyStockModal.jsx   # ä¹°å…¥è‚¡ç¥¨å¼¹çª—
â”‚   â”‚   â”œâ”€â”€ SellStockModal.jsx  # å–å‡ºè‚¡ç¥¨å¼¹çª—
â”‚   â”‚   â”œâ”€â”€ StockChart.jsx      # è‚¡ç¥¨å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ErrorBoundary.jsx   # é”™è¯¯è¾¹ç•Œç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ contexts/               # React Context
â”‚   â”‚   â””â”€â”€ AuthContext.jsx     # ç”¨æˆ·è®¤è¯çŠ¶æ€ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                  # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useAsyncData.js     # å¼‚æ­¥æ•°æ®è·å–
â”‚   â”‚   â”œâ”€â”€ useForm.js          # è¡¨å•çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ usePortfolio.js     # æŠ•èµ„ç»„åˆçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ useStock.js         # è‚¡ç¥¨æ•°æ®
â”‚   â”‚   â””â”€â”€ useUser.js          # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                  # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Home/               # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ Auth/               # ç™»å½•æ³¨å†Œé¡µ
â”‚   â”‚   â”œâ”€â”€ StockDashboard/     # è‚¡ç¥¨ä»ªè¡¨ç›˜
â”‚   â”‚   â”œâ”€â”€ StockDetail/        # è‚¡ç¥¨è¯¦æƒ…é¡µ
â”‚   â”‚   â”œâ”€â”€ Portfolio/          # æŠ•èµ„ç»„åˆé¡µé¢
â”‚   â”‚   â”œâ”€â”€ Watchlist/          # è§‚å¯Ÿåˆ—è¡¨é¡µé¢
â”‚   â”‚   â””â”€â”€ Analytics/          # åˆ†æç»Ÿè®¡é¡µé¢
â”‚   â”‚
â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ formatters.js       # æ•°æ®æ ¼å¼åŒ–å·¥å…·
```

### 2. åç«¯æ¶æ„

```
backend/
â”œâ”€â”€ app.js                      # Express åº”ç”¨å…¥å£
â”œâ”€â”€ package.json                # åç«¯ä¾èµ–é…ç½®
â”‚
â”œâ”€â”€ config/                     # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ index.js                # ç»Ÿä¸€é…ç½®ç®¡ç†
â”‚
â”œâ”€â”€ routes/                     # è·¯ç”±å±‚ (URL -> Controller)
â”‚   â”œâ”€â”€ index.js                # è·¯ç”±èšåˆå™¨
â”‚   â”œâ”€â”€ auth.js                 # è®¤è¯è·¯ç”±
â”‚   â”œâ”€â”€ stocks.js               # è‚¡ç¥¨ç›¸å…³è·¯ç”±
â”‚   â”œâ”€â”€ portfolio.js            # æŠ•èµ„ç»„åˆè·¯ç”±
â”‚   â”œâ”€â”€ trading.js              # äº¤æ˜“è·¯ç”±
â”‚   â”œâ”€â”€ watchlist.js            # è§‚å¯Ÿåˆ—è¡¨è·¯ç”±
â”‚   â”œâ”€â”€ news.js                 # æ–°é—»è·¯ç”±
â”‚   â””â”€â”€ analytics.js            # åˆ†æç»Ÿè®¡è·¯ç”±
â”‚
â”œâ”€â”€ controllers/                # æ§åˆ¶å™¨å±‚ (è¯·æ±‚å¤„ç†)
â”‚   â”œâ”€â”€ authController.js       # è®¤è¯ & ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ stockController.js      # è‚¡ç¥¨æ•°æ®æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ portfolioController.js  # æŠ•èµ„ç»„åˆæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ tradingController.js    # äº¤æ˜“æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ watchlistController.js  # è§‚å¯Ÿåˆ—è¡¨æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ newsController.js       # æ–°é—»æ§åˆ¶å™¨
â”‚   â””â”€â”€ analyticsController.js  # åˆ†æç»Ÿè®¡æ§åˆ¶å™¨
â”‚
â”œâ”€â”€ services/                   # æœåŠ¡å±‚ (ä¸šåŠ¡é€»è¾‘)
â”‚   â”œâ”€â”€ index.js                # æœåŠ¡èšåˆå™¨
â”‚   â”œâ”€â”€ authService.js          # è®¤è¯ & ç”¨æˆ·æœåŠ¡
â”‚   â”œâ”€â”€ stockService.js         # è‚¡ç¥¨æ•°æ®æœåŠ¡
â”‚   â”œâ”€â”€ stockHistoryService.js  # è‚¡ç¥¨å†å²æ•°æ®æœåŠ¡
â”‚   â”œâ”€â”€ portfolioService.js     # æŠ•èµ„ç»„åˆæœåŠ¡
â”‚   â”œâ”€â”€ tradingService.js       # äº¤æ˜“æœåŠ¡
â”‚   â”œâ”€â”€ watchlistService.js     # è§‚å¯Ÿåˆ—è¡¨æœåŠ¡
â”‚   â”œâ”€â”€ newsService.js          # æ–°é—»æœåŠ¡
â”‚   â””â”€â”€ analyticsService.js     # åˆ†æç»Ÿè®¡æœåŠ¡
â”‚
â”œâ”€â”€ database/                   # æ•°æ®åº“å±‚
â”‚   â”œâ”€â”€ database.js             # æ•°æ®åº“è¿æ¥ç®¡ç†
â”‚   â”œâ”€â”€ schema.sql              # æ•°æ®åº“è¡¨ç»“æ„
â”‚   â”œâ”€â”€ seed-data.js            # æµ‹è¯•æ•°æ®ç§å­
â”‚   â”œâ”€â”€ fetch_and_save_stocks.js     # è‚¡ç¥¨æ•°æ®è·å–
â”‚   â”œâ”€â”€ fetch_and_save_news.js       # æ–°é—»æ•°æ®è·å–
â”‚   â””â”€â”€ migrate-transactions-to-history.js  # æ•°æ®è¿ç§»è„šæœ¬
â”‚
â”œâ”€â”€ middleware/                 # ä¸­é—´ä»¶
â”‚   â””â”€â”€ auth.js                 # JWT è®¤è¯ä¸­é—´ä»¶
â”‚
â””â”€â”€ utils/                      # å·¥å…·å‡½æ•°
    â”œâ”€â”€ dateTime.js             # æ—¥æœŸæ—¶é—´å·¥å…·
    â”œâ”€â”€ financial.js            # é‡‘èè®¡ç®—å·¥å…·
    â””â”€â”€ validation.js           # æ•°æ®éªŒè¯å·¥å…·
```

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

1. **ç”¨æˆ·ç³»ç»Ÿ**
   - `users` - ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€æ¨¡æ‹Ÿæ—¥æœŸ

2. **æŠ•èµ„ç»„åˆç³»ç»Ÿ**
   - `portfolios` - æŠ•èµ„ç»„åˆæ€»è§ˆ
   - `positions` - å½“å‰æŒä»“è¯¦æƒ…
   - `transactions` - äº¤æ˜“è®°å½•
   - `portfolio_history` - æŠ•èµ„ç»„åˆå†å²å¿«ç…§

3. **è‚¡ç¥¨æ•°æ®ç³»ç»Ÿ**
   - `stocks` - è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
   - `stock_real_history` - è‚¡ç¥¨å†å²ä»·æ ¼æ•°æ®

4. **æ–°é—»ç³»ç»Ÿ**
   - `news` - æ–°é—»æ•°æ®åŠæƒ…æ„Ÿåˆ†æ

5. **è§‚å¯Ÿåˆ—è¡¨ç³»ç»Ÿ**
   - `watchlists` - ç”¨æˆ·è‚¡ç¥¨è§‚å¯Ÿåˆ—è¡¨

---

## ğŸ”„ æ•°æ®æµæ¶æ„

### 1. è¯·æ±‚å¤„ç†æµç¨‹

```
ç”¨æˆ·è¯·æ±‚ â†’ å‰ç«¯ API å±‚ â†’ åç«¯è·¯ç”± â†’ æ§åˆ¶å™¨ â†’ æœåŠ¡å±‚ â†’ æ•°æ®åº“
                                                   â†“
                                              å¤–éƒ¨ API
                                           (Finnhub/Alpha Vantage)
```

### 2. åˆ†å±‚èŒè´£

- **Routes**: URL è·¯å¾„æ˜ å°„ï¼Œå‚æ•°éªŒè¯
- **Controllers**: HTTP è¯·æ±‚/å“åº”å¤„ç†ï¼Œé”™è¯¯å¤„ç†
- **Services**: ä¸šåŠ¡é€»è¾‘ï¼Œæ•°æ®åº“æ“ä½œï¼Œå¤–éƒ¨APIè°ƒç”¨
- **Database**: æ•°æ®æŒä¹…åŒ–ï¼Œäº‹åŠ¡ç®¡ç†

---

## ğŸŒ API è®¾è®¡

### RESTful API ç«¯ç‚¹

```
# è®¤è¯ç›¸å…³
POST   /api/auth/register         # ç”¨æˆ·æ³¨å†Œ
POST   /api/auth/login            # ç”¨æˆ·ç™»å½•
GET    /api/auth/verify           # TokenéªŒè¯
GET    /api/auth/user/:userId     # è·å–ç”¨æˆ·ä¿¡æ¯

# è‚¡ç¥¨ç›¸å…³
GET    /api/stocks/:symbol        # è·å–è‚¡ç¥¨ä¿¡æ¯
GET    /api/stocks/:symbol/history # è·å–å†å²æ•°æ®
GET    /api/stocks/search?q=      # æœç´¢è‚¡ç¥¨

# æŠ•èµ„ç»„åˆç›¸å…³
GET    /api/portfolio/user/:userId           # è·å–æŠ•èµ„ç»„åˆ
POST   /api/portfolio/user/:userId           # åˆ›å»ºæŠ•èµ„ç»„åˆ
GET    /api/portfolio/user/:userId/transactions # äº¤æ˜“å†å²
GET    /api/portfolio/user/:userId/stats     # æŠ•èµ„ç»„åˆç»Ÿè®¡

# äº¤æ˜“ç›¸å…³
POST   /api/trading/buy           # æ‰§è¡Œä¹°å…¥
POST   /api/trading/sell          # æ‰§è¡Œå–å‡º
GET    /api/trading/history       # äº¤æ˜“å†å²

# è§‚å¯Ÿåˆ—è¡¨
GET    /api/watchlist             # è·å–è§‚å¯Ÿåˆ—è¡¨
POST   /api/watchlist             # æ·»åŠ åˆ°è§‚å¯Ÿåˆ—è¡¨
DELETE /api/watchlist/:symbol     # ç§»é™¤è§‚å¯Ÿé¡¹ç›®

# æ–°é—»ç›¸å…³
GET    /api/news                  # è·å–æ–°é—»åˆ—è¡¨
GET    /api/news/:symbol          # è·å–ç‰¹å®šè‚¡ç¥¨æ–°é—»

# åˆ†æç»Ÿè®¡
GET    /api/analytics/portfolio   # æŠ•èµ„ç»„åˆåˆ†æ
GET    /api/analytics/performance # è¡¨ç°æ‘˜è¦
GET    /api/analytics/history     # ä»·å€¼å†å²
GET    /api/analytics/benchmark   # åŸºå‡†æ¯”è¾ƒ
POST   /api/analytics/daily-settle # æ¯æ—¥ç»“ç®—
```

---

## ğŸ” å®‰å…¨æœºåˆ¶

### 1. è®¤è¯æˆæƒ
- **JWT Token**: æ— çŠ¶æ€èº«ä»½éªŒè¯
- **Password Hashing**: bcrypt åŠ å¯†
- **Auth Middleware**: è·¯ç”±çº§åˆ«çš„è®¤è¯ä¿æŠ¤

### 2. æ•°æ®ä¿æŠ¤
- **å‚æ•°éªŒè¯**: å‰åç«¯åŒé‡éªŒè¯
- **SQLæ³¨å…¥é˜²æŠ¤**: å‚æ•°åŒ–æŸ¥è¯¢
- **CORSé…ç½®**: è·¨åŸŸè¯·æ±‚æ§åˆ¶

---

## ğŸ® æ ¸å¿ƒä¸šåŠ¡æµç¨‹

### 1. ç”¨æˆ·æ³¨å†Œ/ç™»å½•æµç¨‹
```
æ³¨å†Œ â†’ å¯†ç åŠ å¯† â†’ åˆ›å»ºç”¨æˆ·è®°å½• â†’ è‡ªåŠ¨åˆ›å»ºæŠ•èµ„ç»„åˆ â†’ è¿”å›JWT Token
ç™»å½• â†’ éªŒè¯å‡­æ® â†’ ç”ŸæˆJWT Token â†’ è¿”å›ç”¨æˆ·ä¿¡æ¯
```

### 2. è‚¡ç¥¨äº¤æ˜“æµç¨‹
```
é€‰æ‹©è‚¡ç¥¨ â†’ æŸ¥çœ‹å®æ—¶/å†å²ä»·æ ¼ â†’ ä¸‹å•(ä¹°å…¥/å–å‡º) â†’ éªŒè¯èµ„é‡‘/æŒä»“ 
â†’ åˆ›å»ºäº¤æ˜“è®°å½• â†’ æ›´æ–°æŠ•èµ„ç»„åˆ â†’ å†™å…¥å†å²å¿«ç…§
```

### 3. æ•°æ®åŒæ­¥æµç¨‹
```
å¤–éƒ¨API â†’ å®šæ—¶è·å–è‚¡ç¥¨æ•°æ® â†’ å­˜å‚¨åˆ°æ•°æ®åº“ â†’ æ›´æ–°ç”¨æˆ·æŠ•èµ„ç»„åˆä»·å€¼ 
â†’ è®¡ç®—æ”¶ç›Š/äºæŸ â†’ ç”Ÿæˆåˆ†ææŠ¥å‘Š
```

---

## ğŸ“Š æ‰©å±•æ€§è®¾è®¡

### 1. æ¨¡å—åŒ–æ¶æ„
- å‰åç«¯å®Œå…¨åˆ†ç¦»ï¼Œç‹¬ç«‹éƒ¨ç½²
- æœåŠ¡å±‚æ¨¡å—åŒ–ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•
- æ•°æ®åº“è®¾è®¡æ”¯æŒæ°´å¹³æ‰©å±•

### 2. æ€§èƒ½ä¼˜åŒ–
- **è¿æ¥æ± **: æ•°æ®åº“è¿æ¥å¤ç”¨
- **ç¼“å­˜ç­–ç•¥**: è‚¡ç¥¨æ•°æ®ç¼“å­˜
- **åˆ†é¡µæŸ¥è¯¢**: å¤§æ•°æ®é‡å¤„ç†
- **å¼‚æ­¥å¤„ç†**: å¤–éƒ¨APIè°ƒç”¨

### 3. ç›‘æ§ä¸æ—¥å¿—
- **è¯·æ±‚æ—¥å¿—**: æ‰€æœ‰APIè¯·æ±‚è®°å½•
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼
- **å¥åº·æ£€æŸ¥**: `/api/health` ç«¯ç‚¹

---

## ğŸš€ éƒ¨ç½²æ¶æ„

### å¼€å‘ç¯å¢ƒ
```
Frontend (Vite Dev Server) :5173
Backend (Express + Nodemon) :3001
Database (MySQL) :3306
```

### ç”Ÿäº§ç¯å¢ƒ
```
Frontend (Build + Static Server)
Backend (PM2 + Express)
Database (MySQL Cluster)
Reverse Proxy (Nginx)
```

---

## ğŸ“ˆ æŠ€æœ¯ç‰¹ç‚¹

1. **å†å²æ•°æ®æ¨¡æ‹Ÿ**: åŸºäºçœŸå®å†å²è‚¡ç¥¨æ•°æ®è¿›è¡Œæ¨¡æ‹Ÿäº¤æ˜“
2. **å®æ—¶è®¡ç®—**: æŠ•èµ„ç»„åˆä»·å€¼å®æ—¶æ›´æ–°å’Œæ”¶ç›Šè®¡ç®—
3. **æ•°æ®å®Œæ•´æ€§**: äº‹åŠ¡ä¿è¯äº¤æ˜“æ•°æ®ä¸€è‡´æ€§
4. **ç”¨æˆ·ä½“éªŒ**: å“åº”å¼è®¾è®¡ï¼Œå›¾è¡¨å¯è§†åŒ–
5. **å¯æ‰©å±•æ€§**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºåŠŸèƒ½æ·»åŠ 

è¿™ä¸ªæ¶æ„æ”¯æŒç”¨æˆ·ä»å†å²ç‰¹å®šæ—¥æœŸå¼€å§‹ï¼ŒåŸºäºçœŸå®å¸‚åœºæ•°æ®è¿›è¡Œè‚¡ç¥¨äº¤æ˜“å­¦ä¹ å’Œç»ƒä¹ ï¼Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„æ•™è‚²åŸ¹è®­å¹³å°ã€‚
